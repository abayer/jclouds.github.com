<h1>Quick Start: Go Grid</h1>

<h2>Introduction</h2>

<p>Starting with jclouds 1.0 beta 5, we're supporting <a href="http://www.gogrid.com">GoGrid</a> cloud provider,
both for the provider-specific APIs and for <a class="internal absent" href="/ComputeService.html">ComputeService</a> abstraction.</p>

<h3>Important notes</h3>

<p>To use GoGrid, please make sure your have the <em>key</em> and <em>shared secret</em>.
Both can be created/obtained from GoGrid's control panel under My Account &gt; API keys.
The key is typically 16 digits, and the shared secret is 12 digits, but yours may be different.
Using your account's email address won't substitute the key and won't let you access their APIs.</p>

<h3>Using provider-specific API</h3>

<p>To create a context for all subsequent API calls, use:</p>

<pre><code>RestContext&lt;GoGridClient, GoGridAsyncClient&gt; context = 
					new ComputeServiceFactory().createContext(key, sharedSecret)
										.getProviderSpecificContext();

GoGridClient client = context.getApi();
</code></pre>

<p>A typical use case, as demonstrated in much detail <a href="http://github.com/jclouds/jclouds/blob/master/gogrid/src/test/java/org/jclouds/gogrid/GoGridLiveTestDisabled.java">here</a>:</p>

<pre><code>
// make an API call to get the IPs
Set&lt;Ip&gt; availableIps = client.getIpServices().getUnassignedIpList(); 

// iterate over the collection. you're not required to use Iterables
Ip availableIp = Iterables.getLast(availableIps);
</code></pre>
Having an available IP address, you can create a server:

<pre><code>Server createdServer = client.getServerServices().addServer(nameOfServer,
                "GSI-f8979644-e646-4711-ad58-d98a5fa3612c" /*image name*/,
                "1" /*ID of ram, 1 is 512 MB, 2 is 1GB*/,
                availableIp.getIp());</code></pre>

<p>and optionally wait until it fully starts (in GoGrid's terms, until the server creation job is completed):</p>

<pre><code>RetryablePredicate&lt;Server&gt; serverLatestJobCompleted = new RetryablePredicate&lt;Server&gt;(
                new ServerLatestJobCompleted(client.getJobServices()),
                800, 20, TimeUnit.SECONDS);
serverLatestJobCompleted.apply(createdServer); //blocks until the condition is met or timeout is exceeded
//                                                   (returns true/false whether it was never met or not)</code></pre>

<p>Note that this predicate can be used for any type of server-related jobs (for load balancer-related jobs,
 please see <a href="http://github.com/jclouds/jclouds/blob/master/gogrid/src/main/java/org/jclouds/gogrid/predicates/LoadBalancerLatestJobCompleted.java">this predicate</a>).
Also, GoGrid will mark the server creation job finished when the OS is still booting up.</p>

<p>To restart the server, or turn it off, a power command with <a href="http://github.com/jclouds/jclouds/blob/master/gogrid/src/main/java/org/jclouds/gogrid/domain/PowerCommand.java">PowerCommand</a> enum may be used:</p>

<pre><code>client.getServerServices().power(nameOfServer, PowerCommand.RESTART);</code></pre>

<p>Deleting an existing server is accomplished by calling:</p>

<pre><code>client.getServerServices().deleteByName(nameOfServer);</code></pre>

<p>To ssh into a third-party image, you may need credentials that aren't default.
To find out the proper credentials, start up a server and run:</p>

<pre><code>Credentials instanceCredentials = client.getServerServices().getServerCredentialsList().get(nameOfServer)</code></pre>

<p>Using these credentials, it's possible to use jclouds to log in to the instance:
</p><pre><code>SshClient sshClient = context.utils().sshFactory().create(socket,
                instanceCredentials.account, instanceCredentials.key);
sshClient.connect();
String output = sshClient.exec("df").getOutput();
sshClient.disconnect();</code></pre>

<h3>Using ComputeService abstraction==</h3>

<p>To create a generic context, use (as in the previous section):</p>

<pre><code>ComputeServiceContext context = new ComputeServiceContextFactory().createContext("gogrid", user, password,
                ImmutableSet.of(new Log4JLoggingModule(), new JschSshClientModule()));
ComputeService service = context.getComputeService();</code></pre>

<p>With having a ComputeService object in place, you can search for specific type of instance and/or image, and run it:</p>

<pre><code>Template t = service.templateBuilder().minRam(4096).imageId("GSI-6890f8b6-c8fb-4ac1-bc33-2563eb4e29d2").build();
service.runNodesInGroup("testGroup", 1 /*number of instances*/, t);</code></pre>
For more information on using this abstraction, refer to
the detailed <a href="http://github.com/jclouds/jclouds/blob/master/providers/gogrid/src/test/java/org/jclouds/gogrid/compute/GoGridComputeServiceLiveTest.java">test case</a>.

<p><code>Last Updated: 2011-05-29</code></p>