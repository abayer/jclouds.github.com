<h1>jclouds Developer Setup instructions for Eclipse</h1>

<h2>Introduction</h2>

<p><code>Please do not check any eclipse related artifacts(e.g. .settings, .classpath, .project etc.) into git.</code></p>

<p>The following document will help you get started, if you are unfamiliar with eclipse, maven, and git.</p>

<h2>Pre-requisites</h2>

<ul><li>Eclipse 3.4 or higher</li>
</ul><h2>Setup</h2>

<ul><li><p>Clone jclouds from git</p>

<ul><li>If you are a collaborator, use: git clone git@github.com:jclouds/jclouds.git or
  you can use the EGit plugin for eclipse - http://www.eclipse.org/egit/</li>
<li>Otherwise clone from read-only, or clone your fork of jclouds, see the
  <a href="http://code.google.com/p/jclouds/wiki/DevelopersGuide">Developer's Guide</a>f or more information.</li>
</ul></li>
<li><p>At the root directory where you checked out, execute <code>mvn clean install eclipse:configure-workspace  eclipse:eclipse -Dmaven.javadoc.skip=true</code></p>

<ul><li>If the module you are working on is not in the default build list, change to that directory and execute <code>mvn eclipse:configure-workspace eclipse:eclipse</code></li>
</ul></li>
<li><p>Open eclipse</p>

<ul><li>Setup M2_REPO classpath variable

<ul><li>Goto Eclipse Preferences &#x2192; Java &#x2192; Build Path &#x2192; Classpath Variables</li>
<li>New

<ul><li>Name: M2_REPO</li>
<li>Path: /path/to/.m2/repository

<ul><li>Ex. windows: it is in your user profile (<code>%USERPROFILE%</code>), like <code>c:\Documents and Settings\username\.m2\repository</code></li>
<li>Ex. mac: it is in your home directory (<code>$HOME</code>). like <code>/Users/username/.m2/repository</code></li>
</ul></li>
</ul></li>
</ul></li>
<li>Import projects

<ul><li>File, import, General, Existing projects into workspace</li>
<li>Choose the directory your git clone created</li>
<li>Choose all modules</li>
</ul></li>
<li>Setup TestNG plugin

<ul><li>Help, Install New Software</li>
<li>Add

<ul><li>Name: testng</li>
<li>Location: <code>http://beust.com/eclipse</code></li>
</ul></li>
<li>You should see a checkbox near <code>TestNG</code> now in the <code>Available Software</code> view.  Check and click until done.</li>
</ul></li>
</ul></li>
</ul><h2>Running Tests</h2>

<p>Tests are created in TestNG, so make sure you have the eclipse plug-in installed.</p>

<h2>Live testing</h2>

<p>To run tests that use a real live service like s3, you will need to provide your credentials to Eclipse and tell your tests to use them.<br />
You'll key these on the provider name (ex. provider  is s3, cloudfiles, ec2, etc)</p>

<p>To implement this, open the test's Run Configurations and enter in the following into VM arguments:</p>

<pre><code>-Dbasedir=. -Dtest.provider.identity=identity -Dtest.provider.credential=credential</code></pre>

<p>ex. for vcloud
</p><pre><code>-Dbasedir=. -Dtest.vcloud.endpoint=https://vcloudserverilike/api -Dtest.vcloud.identity=user@org -Dtest.vcloud.credential=password</code></pre>

<h2>Ssh testing</h2>

<p>Ssh tests need access to an ssh host you have access to.<br />
Note that this is only required for running pure SSH tests.<br />
SSH indirectly used via a cloud will use the cloud credentials not the ones below.
Note that the destination must be a Unix-like host that at least contains a world readable /etc/passwd file.</p>

<ul><li>In Eclipse's Preferences open the section Run/Debug &gt; String Substitution</li>
<li>Create two new variables named:

<ul><li><code>test.ssh.username</code> with the value of your ssh username</li>
<li><code>test.ssh.password</code> with the value of your ssh password</li>
</ul></li>
</ul><p>Then, for each test that uses ssh, open the test's Run Configurations and enter in the following into VM arguments:</p>

<pre><code>-Dtest.ssh.host=localhost -Dtest.ssh.port=22 -Dtest.ssh.username=${test.ssh.username} -Dtest.ssh.password=${test.ssh.password}</code></pre>

<ul><li>note that you can replace {{{test.ssh.host}}} and {{{test.ssh.port}}} above if you are not connecting to localhost.</li>
</ul><h2>Create a demo project</h2>

<p>For instance if you want to create a demo project in aws, you can do it with following steps:</p>

<ul><li>Copy a sample project there (aws/demos directory)</li>
<li>Change pom.xml from demos and add new module</li>
<li>Change pom.xml of the new project (change names and classes)</li>
<li>Add your code</li>
<li><code>mvn eclipse:clean</code></li>
<li><code>mvn eclipse:eclipse -DskipTests=true</code></li>
<li>You  can import your project now in eclipse.</li>
</ul><h2>Clean build</h2>

<ul><li>Close Eclipse</li>
<li><code>mvn eclipse:clean</code></li>
<li><code>mvn clean</code> (may not be needed?)</li>
<li><code>mvn install</code></li>
<li>Then to start coding again:

<ul><li><code>mvn eclipse:eclipse -Dmaven.javadoc.skip=true</code></li>
<li>Open Eclipse</li>
<li>Delete old project references (but not underlying files)</li>
<li>Re-import projects</li>
</ul></li>
</ul><p><code>Last Updated: 2011-07-26</code></p>